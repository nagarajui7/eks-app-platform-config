Started by user [8mha:////4K5wFlcXmJC0DsPJ4mF2W0rBte8CK1/5fcgVP9EWRDhLAAAAlx+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAzWEgZu/dLi1CL9xJTczDwAj6GcLcAAAAA=[0madmin
Building in workspace /home/ubuntu/.jenkins/workspace/cluster-provision
[cluster-provision] $ /bin/sh -xe /tmp/jenkins2478253373407535655.sh
+ aws --version
aws-cli/1.16.155 Python/3.6.7 Linux/4.15.0-1032-aws botocore/1.12.145
+ cd /home/ubuntu
+ ./cluster-setup.sh 1 eu-west-1 t2.small demo
aws-cli/1.16.155 Python/3.6.7 Linux/4.15.0-1032-aws botocore/1.12.145
number of workers to be created 1
region selected eu-west-1
size of instance selected t2.small
ami-08716b70cac884aaa
inserting values in cfn template
creating vpc and subnet
{
    "StackId": "arn:aws:cloudformation:eu-west-1:828164643967:stack/demo/abc6b6d0-72fd-11e9-a363-020975c14ca0"
}
displaying the subnets and vpc created
vpc-06d0186d35f3d5902
subnet-0267496bc31915663
subnet-06036424852906895
subnet-084f733e978b839c7
sg-0adfb3f3dc37cfe15
create eks cluster
{
    "cluster": {
        "name": "demo",
        "arn": "arn:aws:eks:eu-west-1:828164643967:cluster/demo",
        "createdAt": 1557477051.229,
        "version": "1.12",
        "roleArn": "arn:aws:iam::828164643967:role/eksCluster-cap",
        "resourcesVpcConfig": {
            "subnetIds": [
                "subnet-0267496bc31915663",
                "subnet-06036424852906895",
                "subnet-084f733e978b839c7"
            ],
            "securityGroupIds": [
                "sg-0adfb3f3dc37cfe15"
            ],
            "vpcId": "vpc-06d0186d35f3d5902",
            "endpointPublicAccess": true,
            "endpointPrivateAccess": false
        },
        "logging": {
            "clusterLogging": [
                {
                    "types": [
                        "api",
                        "audit",
                        "authenticator",
                        "controllerManager",
                        "scheduler"
                    ],
                    "enabled": false
                }
            ]
        },
        "status": "CREATING",
        "certificateAuthority": {},
        "platformVersion": "eks.1"
    }
}
cluster status
"CREATING"

Cluster status not active
Unable to connect to the server: dial tcp: lookup 3B95A13383120FFAE5CF0316188A56AA.sk1.eu-central-1.eks.amazonaws.com on 127.0.0.53:53: no such host
create nodes for the cluster

An error occurred (ValidationError) when calling the CreateStack operation: Parameter 'NodeAutoScalingGroupDesiredCapacity' must be a number.

An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id demo-nodes does not exist
Terminated
adding workers to cluster
Terminated
Build was aborted
Aborted by [8mha:////4K5wFlcXmJC0DsPJ4mF2W0rBte8CK1/5fcgVP9EWRDhLAAAAlx+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAzWEgZu/dLi1CL9xJTczDwAj6GcLcAAAAA=[0madmin
Finished: ABORTED
